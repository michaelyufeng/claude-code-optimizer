---
description: Planning phase - PRD and feature specification
---

# 规划阶段 (Phase 2/4)

编写 PRD 和功能规格说明。

## 前置条件

- Gate 1 已通过
- 技术方案已确定

## 当前 Agent

```
📋 产品经理 (PM)
- 模型: Sonnet
- 职责: PRD 编写、需求优先级、路线图规划
- 辅助: 🔬 分析师
```

---

## 执行流程

### Step 1: 功能规划

```
📋 [PM] 功能规划

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## MVP 功能范围

请选择 MVP 包含的功能:

□ [功能1] - [描述]
□ [功能2] - [描述]
□ [功能3] - [描述]
□ [功能4] - [描述]

[1] ✅ 确认选择
[2] ➕ 添加功能
[3] ➖ 移除功能
[4] 🔍 查看功能详情

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### Step 2: 优先级排序

```
📋 [PM] 优先级排序

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 功能优先级

| 功能 | 价值 | 复杂度 | 优先级 |
|------|------|--------|--------|
| [功能1] | 高 | 中 | P0 |
| [功能2] | 高 | 高 | P0 |
| [功能3] | 中 | 低 | P1 |
| [功能4] | 低 | 低 | P2 |

## 开发顺序建议

1. [功能1] - 核心功能，必须先完成
2. [功能2] - 依赖功能1
3. [功能3] - 独立功能
4. [功能4] - 增强功能

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

确认优先级:
[1] ✅ 确认
[2] 🔄 调整顺序
[3] 📝 修改优先级
```

### Step 3: 用户故事

```
📋 [PM] 用户故事

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 功能: [功能名称]

### 用户故事

作为 [用户角色]，
我想要 [目标/行为]，
以便 [价值/收益]。

### 验收标准

- [ ] [标准1]
- [ ] [标准2]
- [ ] [标准3]

### 边界条件

- 正常流程: [描述]
- 异常处理: [描述]
- 边界情况: [描述]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1] ✅ 确认用户故事
[2] 📝 修改
[3] ➡️ 下一个功能
```

---

## 阶段产出

### 生成 PRD 文档

创建 `docs/PRD.md`:

```markdown
# 产品需求文档 (PRD)

> 版本: 1.0 | 更新: [日期]

## 1. 产品概述

### 1.1 产品愿景
[愿景描述]

### 1.2 目标用户
[用户描述]

### 1.3 核心价值
[价值主张]

## 2. 功能规格

### 2.1 MVP 功能

#### 功能1: [名称]
- 优先级: P0
- 描述: [描述]
- 用户故事: [故事]
- 验收标准: [标准]

#### 功能2: [名称]
...

### 2.2 后续功能
- [功能列表]

## 3. 非功能需求

### 3.1 性能要求
- [要求]

### 3.2 安全要求
- [要求]

## 4. 开发路线图

| 阶段 | 功能 | 状态 |
|------|------|------|
| MVP | [功能1,2] | 规划中 |
| v1.1 | [功能3] | 待定 |
```

### 更新 CLAUDE.md

```markdown
## 核心功能

### MVP 范围
- [ ] [功能1]
- [ ] [功能2]

### 后续版本
- [ ] [功能3]
- [ ] [功能4]

## 开发优先级

P0 - 必须完成: [功能列表]
P1 - 应该完成: [功能列表]
P2 - 可以延后: [功能列表]
```

### 更新 Memory

```markdown
### [日期] - 规划阶段完成
- **完成**: PRD 编写、功能优先级、用户故事
- **决策**: MVP 包含 [X] 个功能
- **产出**: docs/PRD.md
- **下一步**: 进入架构阶段
```

---

## Gate 2 检查清单

```
🚧 Gate 2 检查

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ PRD 文档完成
✅ 功能优先级明确
✅ 用户故事清晰
✅ MVP 范围确定
✅ CLAUDE.md 已更新

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Gate 2 通过！进入架构阶段...
```
