---
description: Development phase - implementation with task splitting and multi-agent
---

# 开发阶段 (Phase 4/4)

代码实现、测试、集成。

## 前置条件

- Gate 3 已通过
- 架构设计已完成

## 当前 Agent

```
💻 开发者 (Developer)
- 模型: 根据任务复杂度自动分配
- 职责: 代码实现、测试、优化
- 辅助: 👁️ 审核员
```

---

## 执行流程

### Step 1: 任务分解

```
💻 [开发者] 任务分解

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 开发任务列表

基于 PRD 和架构设计，自动生成开发任务:

### 基础设施 (Infrastructure)
| ID | 任务 | 规模 | 状态 |
|----|------|------|------|
| I1 | 项目初始化 | S | ⬜ |
| I2 | 数据库配置 | S | ⬜ |
| I3 | 认证中间件 | M | ⬜ |

### 功能开发 (Features)
| ID | 任务 | 规模 | 依赖 | 状态 |
|----|------|------|------|------|
| F1 | 用户注册 | M | I1,I2 | 🔒 |
| F2 | 用户登录 | M | I3 | 🔒 |
| F3 | [核心功能1] | L | F2 | 🔒 |
| F4 | [核心功能2] | M | F3 | 🔒 |

### 测试 (Testing)
| ID | 任务 | 规模 | 依赖 | 状态 |
|----|------|------|------|------|
| T1 | 单元测试 | M | F1-F4 | 🔒 |
| T2 | 集成测试 | M | T1 | 🔒 |

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1] ✅ 确认任务列表
[2] ➕ 添加任务
[3] 📝 修改任务
[4] 🔄 重新分解
```

### Step 2: 自动任务分配

```
💻 [协调者] 任务分配

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 执行计划

### 阶段 1: 基础设施 (可并行)

┌─────────┐  ┌─────────┐  ┌─────────┐
│   I1    │  │   I2    │  │   I3    │
│ 项目初始 │  │ 数据库   │  │ 认证    │
│ Haiku   │  │ Haiku   │  │ Sonnet  │
└─────────┘  └─────────┘  └─────────┘
    ↓            ↓            ↓
    └────────────┴────────────┘
                 ↓
### 阶段 2: 核心功能 (顺序执行)

┌─────────┐    ┌─────────┐    ┌─────────┐
│   F1    │───▶│   F2    │───▶│   F3    │
│ 用户注册 │    │ 用户登录 │    │ 核心功能 │
│ Sonnet  │    │ Sonnet  │    │ Sonnet  │
└─────────┘    └─────────┘    └─────────┘
                                  ↓
### 阶段 3: 测试 & 审核

┌─────────┐    ┌─────────┐
│   T1    │───▶│   T2    │
│ 单元测试 │    │ 集成测试 │
│ Sonnet  │    │ Sonnet  │
└─────────┘    └─────────┘
      ↓
┌─────────────────────────┐
│     👁️ 代码审核         │
│      Sonnet             │
└─────────────────────────┘

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

预估:
- 总任务: 8 个
- 可并行: 3 个
- 预估 Token: ~150K

[1] ▶️ 开始执行
[2] 📝 调整计划
[3] 🔍 查看任务详情
```

### Step 3: 任务执行

```
💻 [开发者] 执行任务: I1 - 项目初始化

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 任务详情

目标: 初始化项目结构和基础配置
规模: S (小型)
模型: Haiku

## 执行步骤

1. 创建目录结构
2. 初始化 package.json
3. 安装依赖
4. 配置 TypeScript
5. 配置 ESLint/Prettier

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

正在执行...

✅ 创建 src/routes/
✅ 创建 src/services/
✅ 创建 src/models/
...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

任务 I1 完成！

[1] ▶️ 继续下一个任务
[2] 📋 查看变更
[3] 🔄 重做此任务
```

### Step 4: 代码审核

每个功能完成后自动触发:

```
👁️ [审核员] 代码审核

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 审核: F1 - 用户注册

### 代码质量
✅ 类型定义完整
✅ 错误处理正确
✅ 命名规范符合
⚠️ 缺少输入验证 (建议修复)

### 安全检查
✅ 密码正确哈希
✅ SQL 注入防护
✅ 无敏感信息泄露

### 测试覆盖
⚠️ 单元测试覆盖率: 60% (建议 > 80%)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

审核结果: ⚠️ 需要小修改

[1] 🔧 自动修复问题
[2] 📝 手动修改
[3] ⏭️ 跳过 (记录问题)
```

---

## 开发进度追踪

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚗 开发阶段进度
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

总进度: ████████████░░░░░░░░ 60%

基础设施: ████████████████████ 100% ✅
功能开发: ████████████░░░░░░░░ 60%
测试:     ░░░░░░░░░░░░░░░░░░░░ 0%

当前任务: F3 - 核心功能1
当前 Agent: 💻 开发者 (Sonnet)
下一任务: F4 - 核心功能2

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[✅ I1] [✅ I2] [✅ I3]
[✅ F1] [✅ F2] [🔄 F3] [⬜ F4]
[⬜ T1] [⬜ T2]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 阶段产出

### 代码文件

按照架构设计生成的所有代码文件。

### 更新 CLAUDE.md

```markdown
## 开发状态

当前阶段: 开发完成
完成功能:
- ✅ 用户注册/登录
- ✅ 核心功能1
- ✅ 核心功能2

## 已知问题

- [ ] [问题1] - [优先级]
- [ ] [问题2] - [优先级]
```

### 更新 Memory

```markdown
### [日期] - 开发阶段完成
- **完成**: 所有功能开发、测试、代码审核
- **代码量**: [X] 文件, [Y] 行
- **测试覆盖**: [Z]%
- **待优化**: [问题列表]
```

---

## 项目完成

```
🎉 项目开发完成！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 完成统计

- 开发周期: [X] 天
- 总任务数: [Y] 个
- 代码行数: [Z] 行
- 测试覆盖: [W]%

## 产出文件

📄 docs/PRD.md - 产品需求文档
📄 docs/ARCHITECTURE.md - 架构设计文档
📄 CLAUDE.md - 项目配置 (持续更新)
📁 src/ - 源代码

## 阶段回顾

[✅ 研究] → [✅ 规划] → [✅ 架构] → [✅ 开发]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

下一步:
[1] 📦 生成部署脚本
[2] 📝 生成 README
[3] 🔄 开始新功能迭代
[4] 📊 查看完整报告
```
