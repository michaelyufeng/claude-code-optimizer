---
description: Planning phase - create PRD and define MVP scope
---

# 规划阶段 (Phase 2/9)

## 前置检查

读取 `.claude/PROJECT_STATE.json` 确认：
1. 研究阶段 (`research`) 已完成
2. 当前阶段为 `planning`

**如果研究未完成，拒绝执行：**
```
🔒 无法进入规划阶段

研究阶段尚未完成。请先运行：
/project-optimizer:research

缺失的研究：
❌ [未完成的研究类型]
```

## 规划内容

基于研究阶段的成果，完成以下规划：

### 📋 1. 产品概述

```markdown
## 产品概述

### 产品名称
[名称]

### 一句话描述
[用一句话说明产品是什么、为谁解决什么问题]

### 产品愿景
[长期愿景]

### 核心价值主张
[为什么用户要选择我们]
```

---

### 👤 2. 用户故事

使用标准格式定义用户故事：

```markdown
## 用户故事

### 核心用户故事
作为 [用户角色]，
我想要 [功能/目标]，
以便 [获得的价值]。

### 用户故事列表

| ID | 用户角色 | 需求 | 价值 | 优先级 |
|----|----------|------|------|--------|
| US-001 | | | | P0 |
| US-002 | | | | P0 |
| US-003 | | | | P1 |
| US-004 | | | | P1 |
| US-005 | | | | P2 |
```

优先级说明：
- P0：MVP 必须有
- P1：第一版后续迭代
- P2：未来考虑

---

### 🎯 3. MVP 范围定义

```markdown
## MVP 范围

### 包含功能 (Must Have)
- [ ] 功能1：[描述]
- [ ] 功能2：[描述]
- [ ] 功能3：[描述]

### 不包含功能 (Out of Scope)
- ❌ [功能A]：原因 - [为什么排除]
- ❌ [功能B]：原因 - [为什么排除]

### 技术约束
- [约束1]
- [约束2]

### 时间约束
- 预计开发周期：[X周]
- 里程碑：
  1. [里程碑1] - [日期]
  2. [里程碑2] - [日期]
```

---

### 📊 4. 成功指标

```markdown
## 成功指标

### 北极星指标
[单一最重要的指标]

### 关键指标
| 指标 | 定义 | 目标值 | 测量方法 |
|------|------|--------|----------|
| 用户获取 | | | |
| 用户活跃 | | | |
| 用户留存 | | | |
| 收入/转化 | | | |

### 健康指标
| 指标 | 警戒线 |
|------|--------|
| 错误率 | < X% |
| 响应时间 | < Xms |
| 用户满意度 | > X |
```

---

### ⚠️ 5. 风险评估

```markdown
## 风险评估

| 风险 | 概率 | 影响 | 应对策略 |
|------|------|------|----------|
| [技术风险1] | 高/中/低 | 高/中/低 | [策略] |
| [市场风险1] | 高/中/低 | 高/中/低 | [策略] |
| [资源风险1] | 高/中/低 | 高/中/低 | [策略] |

### 依赖项
- [依赖1]：风险等级 [高/中/低]
- [依赖2]：风险等级 [高/中/低]
```

---

## 输出产物

完成规划后，生成 `docs/PRD.md`：

```markdown
# [产品名称] - 产品需求文档 (PRD)

> 版本: 1.0
> 日期: [日期]
> 状态: 待审核

## 1. 产品概述
[从上面汇总]

## 2. 用户故事
[从上面汇总]

## 3. MVP 范围
[从上面汇总]

## 4. 成功指标
[从上面汇总]

## 5. 风险评估
[从上面汇总]

## 6. 附录
- 研究报告：docs/RESEARCH.md
```

---

## 阶段完成

更新 `PROJECT_STATE.json`:
```json
{
  "phases": {
    "planning": { "status": "completed", "completedAt": "[timestamp]" },
    "gate1": { "status": "in_progress", "completedAt": null }
  },
  "currentPhase": 3
}
```

输出：
```
✅ 规划阶段完成！

已生成：
📄 docs/PRD.md - 产品需求文档

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✓ 研究 → ✓ 规划 → 🚧 Gate1 → 🏗️ 架构 → 🎨 原型 → ✅ Gate2 → ⚙️ 后端 → 🔗 集成 → 📦 输出
                     ↑
                   下一步
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

下一步：运行 /project-optimizer:gate1 进入规划审核
```
