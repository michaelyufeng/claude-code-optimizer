---
description: Capture session info to CLAUDE.md memory
---

# Diary - 记录会话

在会话结束时或重要节点时记录关键信息到 CLAUDE.md 的 Memory 区域。

## 使用场景

- 完成一个重要任务后
- 遇到需要记住的决策
- 发现项目重要信息
- 会话即将结束前

## 执行流程

```
1. 分析当前会话
   - 完成了什么任务？
   - 做了什么重要决策？
   - 发现了什么问题？
   - 下一步是什么？

2. 生成日记条目
   格式：
   ### YYYY-MM-DD HH:MM - [简短标题]
   - **完成**: [完成的任务]
   - **决策**: [重要决策及原因]
   - **发现**: [新发现的信息]
   - **待办**: [下一步任务]

3. 追加到 CLAUDE.md 的 ## Memory 区域
```

## 输出格式

```markdown
## Memory

### 2024-12-23 15:30 - 实现用户认证
- **完成**: 设计数据模型，实现注册接口
- **决策**: 使用 JWT 而非 session（无状态，易扩展）
- **发现**: 现有 User 模型需要添加 password_hash 字段
- **待办**: 实现登录接口，添加 token 验证中间件
```

## 注意事项

- 保持简洁，每条记录不超过 5 行
- Memory 区域保留最近 10 条记录
- 超过 10 条时，旧记录移入 `docs/HISTORY.md`
- 使用 Git commit 作为自然的版本记录

## 快捷用法

```
/diary                    # 自动分析会话并记录
/diary "完成了XX功能"      # 指定记录内容
```
